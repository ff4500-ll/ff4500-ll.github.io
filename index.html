<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="profile.css"> 
    <link rel="stylesheet" href="css/flip.css"> 
    <meta property="og:title" content="shiirou." />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:image" content="https://ff4500-ll.github.io/static/img/PRTS.gif" />
    <meta property="og:url" content="https://ff4500-ll.github.io/" />
    <meta property="og:description" content="In other words, Hold my hand" />
    <meta property="theme-color" content="#ff4500" />
</head>
<body>
    <div class="page-content">
        <canvas id="canvas"></canvas>
        <div class="background"></div>
        <div class="blur-container">
            <h1 style="margin-bottom: 5%;">Hi</h1>
            <p style="margin-top: -4%;">Cat</p>

            <div class="link-container">
                <div class="link-wrapper">
                    <a href="https://soundcloud.com/shiirou2412" target="_blank">
                        <img src="static/img/soundcloud-logo-icon.svg">
                    </a>
                </div>
                <div class="link-wrapper">
                    <a href="https://open.spotify.com/user/fy8trky0qve2uk7xj1uq6nk48?si=a3076b3f46fe4a77" target="_blank">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg">
                    </a>
                </div>
                <div class="link-wrapper">
                    <a href="https://steamcommunity.com/profiles/76561198375482892" target="_blank">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/8/83/Steam_icon_logo.svg">
                    </a>
                </div>
                <div class="link-wrapper">
                    <a href="https://github.com/FF4500-LL" target="_blank">
                        <img src="static/img/github-mark-white.svg">
                    </a>
                </div>
            </div>

            <iframe style="border-radius:12px" src="https://open.spotify.com/embed/album/0gwS2D9sukMLXNvleEnYr2?utm_source=generator" 
                width="100%" height="352" frameBorder="0" 
                allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy">
            </iframe>

            <a class="background-link" href="https://www.pixiv.net/en/artworks/82480775" target="_blank">Background</a>
        </div>
        <audio id="background-music" autoplay></audio>
    </div>

    <a href="profile2.html" class="right-transition">
        <img src="static/img/right.png">
    </a>

    <script src="script.js"></script>
    <script src="shooting_stars.js"></script>
    <script>
        // Audio loadder
        window.addEventListener('load', function () {
            document.body.classList.add('loaded');
        });

        // Web push
        const publicKey = "BJuUGwyGXiW3rWw9n1MuVQLfAQzWkxS_lvMhDyM541O-9ewhIjADyy11b2OhVcrJ4Oh2APauDpe1CgapY7eypjk";

        async function subscribeUser() {
            if ('serviceWorker' in navigator && 'PushManager' in window) {
                const reg = await navigator.serviceWorker.register('sw.js');
                const sub = await reg.pushManager.subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: urlBase64ToUint8Array(publicKey)
                });

                await fetch('http://localhost:1880/subscribe', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(sub)
                });
                alert('Subscribed!');
            }
        }

        function urlBase64ToUint8Array(base64String) {
            const padding = '='.repeat((4 - base64String.length % 4) % 4);
            const base64 = (base64String + padding)
                .replace(/\-/g, '+')
                .replace(/_/g, '/');
            const rawData = window.atob(base64);
            const outputArray = new Uint8Array(rawData.length);
            for (let i = 0; i < rawData.length; ++i) {
                outputArray[i] = rawData.charCodeAt(i);
            }
            return outputArray;
        }

    document.getElementById('subscribe').addEventListener('click', subscribeUser);

    </script>
</body>

<div style="position: fixed; top: 20px; left: 20px; z-index: 9999;">
    <button id="subscribe">Subscribe</button>
</div>
    
</html>
